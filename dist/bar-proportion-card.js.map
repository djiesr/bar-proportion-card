{"version":3,"file":"bar-proportion-card.js","mappings":"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","sources":["webpack://bar-proportion-card/./src/bar-proportion-editor.js","webpack://bar-proportion-card/webpack/bootstrap","webpack://bar-proportion-card/./src/bar-proportion-card.js","webpack://bar-proportion-card/./src/bar-proportion-utils.js","webpack://bar-proportion-card/./src/bar-proportion-styles.js"],"sourcesContent":["class BarProportionCardEditor extends HTMLElement {\n  static get styles() {\n    return `\n      .form-container {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        padding: 16px;\n      }\n      .row {\n        padding: 8px 0;\n        display: flex;\n        flex-direction: column;\n      }\n      .entities {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n      .entity-row {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n      .entity-row ha-icon {\n        cursor: pointer;\n        color: var(--primary-text-color);\n      }\n      mwc-button {\n        margin-top: 8px;\n      }\n      ha-textfield {\n        width: 100%;\n      }\n    `;\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._initialized = false;\n  }\n\n  set hass(hass) {\n    this._hass = hass;\n    if (this._config && !this._initialized) {\n      this._initialize();\n    }\n  }\n  \n  setConfig(config) {\n    this._config = config;\n    if (this._hass && !this._initialized) {\n      this._initialize();\n    }\n  }\n\n  _initialize() {\n    this._initialized = true;\n    this._createForm();\n  }\n\n  get _title() {\n    return this._config?.title || '';\n  }\n\n  get _entities() {\n    return this._config?.entities || [];\n  }\n\n  get _display_mode() {\n    return this._config?.display_mode || 'percentage';\n  }\n\n  get _decimals() {\n    return this._config?.decimals || 0;\n  }\n\n  get _unit() {\n    return this._config?.unit || '';\n  }\n\n  _createForm() {\n    if (!this._hass || !this._config) return;\n\n    const content = document.createElement('div');\n    content.className = 'form-container';\n    content.innerHTML = `\n      <style>${BarProportionCardEditor.styles}</style>\n      <div class=\"row\">\n        <ha-textfield\n          label=\"Titre\"\n          .value=\"${this._title}\"\n          @change=\"${this._valueChanged}\"\n          id=\"title\"\n        ></ha-textfield>\n      </div>\n      \n      <div class=\"row\">\n        <ha-select\n          label=\"Mode d'affichage\"\n          .value=\"${this._display_mode}\"\n          @selected=\"${this._displayModeChanged}\"\n          id=\"display_mode\"\n        >\n          <mwc-list-item value=\"percentage\">Pourcentage</mwc-list-item>\n          <mwc-list-item value=\"value\">Valeur</mwc-list-item>\n        </ha-select>\n      </div>\n\n      <div class=\"row\">\n        <ha-textfield\n          label=\"Décimales\"\n          type=\"number\"\n          min=\"0\"\n          max=\"5\"\n          .value=\"${this._decimals}\"\n          @change=\"${this._valueChanged}\"\n          id=\"decimals\"\n        ></ha-textfield>\n      </div>\n\n      <div class=\"row\">\n        <ha-textfield\n          label=\"Unité\"\n          .value=\"${this._unit}\"\n          @change=\"${this._valueChanged}\"\n          id=\"unit\"\n        ></ha-textfield>\n      </div>\n\n      <div class=\"row\">\n        <label>Entités</label>\n        <div class=\"entities\" id=\"entities\">\n          ${this._entities.map((entity, index) => this._createEntityRow(entity, index)).join('')}\n        </div>\n        <mwc-button @click=\"${this._addEntity}\">Ajouter une entité</mwc-button>\n      </div>\n    `;\n\n    // Clear shadow root and append new content\n    while (this.shadowRoot.firstChild) {\n      this.shadowRoot.removeChild(this.shadowRoot.firstChild);\n    }\n    this.shadowRoot.appendChild(content);\n\n    // Initialize entity pickers\n    this._entities.forEach((_, index) => {\n      const entityPicker = this.shadowRoot.querySelector(`#entity-${index}`);\n      if (entityPicker) {\n        entityPicker.hass = this._hass;\n      }\n    });\n  }\n\n  _createEntityRow(entity, index) {\n    if (!this._hass) return '';\n\n    return `\n      ${index === 0 ? `\n        <div class=\"entity-header\" style=\"display: flex; gap: 8px; margin-bottom: 8px; color: var(--primary-text-color);\">\n          <div style=\"flex-grow: 1; min-width: 200px;\">Entité</div>\n          <div style=\"flex-grow: 1; min-width: 150px;\">Nom personnalisé</div>\n          <div style=\"min-width: 120px;\">Couleur</div>\n          <div style=\"width: 48px;\"></div>\n        </div>\n      ` : ''}\n      <div class=\"entity-row\">\n        <ha-entity-picker\n          id=\"entity-${index}\"\n          .hass=\"${this._hass}\"\n          .value=\"${entity.entity}\"\n          label=\"Sélectionner une entité\"\n          allow-custom-entity\n          @value-changed=\"${(ev) => this._entityChanged(index, ev)}\"\n          style=\"flex-grow: 1; min-width: 200px;\"\n        ></ha-entity-picker>\n        <ha-textfield\n          .value=\"${entity.name || ''}\"\n          label=\"Nom affiché\"\n          @change=\"${(ev) => this._nameChanged(index, ev)}\"\n          style=\"flex-grow: 1; min-width: 150px;\"\n        ></ha-textfield>\n        <ha-textfield\n          .value=\"${entity.color || ''}\"\n          label=\"(ex: #FF0000)\"\n          @change=\"${(ev) => this._colorChanged(index, ev)}\"\n          style=\"min-width: 120px;\"\n        ></ha-textfield>\n        <ha-icon-button\n          .path=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\"\n          @click=\"${() => this._removeEntity(index)}\"\n          style=\"color: var(--primary-text-color); width: 48px;\"\n        ></ha-icon-button>\n      </div>\n    `;\n  }\n\n  _entityChanged(index, ev) {\n    const entities = [...this._entities];\n    entities[index] = { ...entities[index], entity: ev.detail.value };\n    this._updateConfig({ entities });\n  }\n\n  _nameChanged(index, ev) {\n    const entities = [...this._entities];\n    entities[index] = { ...entities[index], name: ev.target.value };\n    this._updateConfig({ entities });\n  }\n\n  _colorChanged(index, ev) {\n    const entities = [...this._entities];\n    entities[index] = { ...entities[index], color: ev.target.value };\n    this._updateConfig({ entities });\n  }\n\n  _addEntity() {\n    const entities = [...this._entities];\n    entities.push({\n      entity: '',\n      name: '',\n      color: ''\n    });\n    this._updateConfig({ entities });\n  }\n\n  _removeEntity(index) {\n    const entities = [...this._entities];\n    entities.splice(index, 1);\n    this._updateConfig({ entities });\n  }\n\n  _displayModeChanged(ev) {\n    this._updateConfig({ display_mode: ev.target.value });\n  }\n\n  _valueChanged(ev) {\n    const target = ev.target;\n    const value = target.type === 'number' ? Number(target.value) : target.value;\n    this._updateConfig({ [target.id]: value });\n  }\n\n  _updateConfig(updates) {\n    const newConfig = { ...this._config, ...updates };\n    const event = new CustomEvent('config-changed', {\n      detail: { config: newConfig },\n      bubbles: true,\n      composed: true\n    });\n    this.dispatchEvent(event);\n    this._config = newConfig;\n    this._createForm();\n  }\n}\n\ncustomElements.define('bar-proportion-card-editor', BarProportionCardEditor);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import styles from './bar-proportion-styles.js';\nimport { formatDisplay, processEntityData } from './bar-proportion-utils.js';\nimport './bar-proportion-editor.js';\n\nclass BarProportionCard extends HTMLElement {\n\n  constructor() {\n    super();\n    console.log('[BarProportionCard] Constructor');\n  }\n  \n  static getConfigElement() {\n    console.log('[BarProportionCard] getConfigElement - creating editor');\n    const editor = document.createElement('bar-proportion-card-editor');\n    console.log('[BarProportionCard] getConfigElement - editor created:', editor);\n    return editor;\n  }\n  \n  static getStubConfig() {\n    console.log('[BarProportionCard] getStubConfig called');\n    return {\n      title: \"Ma barre de proportion\",\n      entities: [\n        {\n          entity: \"\",\n          name: \"\",\n          color: \"var(--primary-color)\"\n        }\n      ],\n      display_mode: \"percentage\",\n      decimals: 0,\n      unit: \"\"\n    };\n  }\n\n  setConfig(config) {\n    if (!config.entities || !Array.isArray(config.entities)) {\n      throw new Error('Please define entities');\n    }\n    this.config = {\n      display_mode: 'percentage',\n      unit: '',\n      decimals: 0,\n      ...config\n    };\n  }\n\n  set hass(hass) {\n    this._hass = hass;\n    if (!this.content) {\n      this.content = document.createElement('div');\n      this.appendChild(this.content);\n    }\n    this.updateCard();\n  }\n\n  updateCard() {\n    const values = this.config.entities.map(entity => \n      processEntityData(entity, this._hass)\n    );\n\n    const total = values.reduce((sum, item) => sum + item.value, 0);\n    \n    this.content.innerHTML = `\n      <style>${styles}</style>\n      <ha-card>\n        ${this.config.title ? `<h1 class=\"header\">${this.config.title}</h1>` : ''}\n        \n        <div class=\"bar-container\">\n          ${values.map(item => `\n            <div class=\"bar-section\" \n                 style=\"width: ${(item.value / total * 100)}%; background-color: ${item.color};\">\n            </div>\n          `).join('')}\n        </div>\n\n        <div class=\"legend\">\n          ${values.map(item => `\n            <div class=\"legend-item\">\n              <div class=\"legend-color\" style=\"background-color: ${item.color};\"></div>\n              <span>${item.name} (${formatDisplay(item.value, total, this.config)})</span>\n            </div>\n          `).join('')}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n\ncustomElements.define('bar-proportion-card', BarProportionCard);\n","export function formatDisplay(value, total, config) {\n  if (config.display_mode === 'percentage') {\n    return `${(value / total * 100).toFixed(config.decimals)}%`;\n  } else {\n    return `${value.toFixed(config.decimals)}${config.unit}`;\n  }\n}\n\nexport function processEntityData(entity, hass) {\n  const state = hass.states[entity.entity];\n  if (!state) {\n    console.warn(`Entity ${entity.entity} not found`);\n    return {\n      name: entity.name || entity.entity,\n      value: 0,\n      color: entity.color || 'var(--primary-color)'\n    };\n  }\n  return {\n    name: entity.name || state.attributes.friendly_name || entity.entity,\n    value: parseFloat(state.state) || 0,\n    color: entity.color || 'var(--primary-color)'\n  };\n}\n","const styles = `\n  ha-card {\n    background: var(--ha-card-background, var(--card-background-color));\n    border-radius: var(--ha-card-border-radius, 12px);\n    box-shadow: var(--ha-card-box-shadow, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12));\n    color: var(--primary-text-color);\n    padding: 16px;\n  }\n  .header {\n    color: var(--primary-text-color);\n    font-size: var(--ha-card-header-font-size, 24px);\n    line-height: 1.2;\n    margin-bottom: 16px;\n    font-weight: normal;\n  }\n  .bar-container {\n    width: 100%;\n    height: 24px;\n    display: flex;\n    border-radius: 12px;\n    overflow: hidden;\n    background: var(--secondary-background-color);\n    margin: 8px 0;\n  }\n  .bar-section {\n    height: 100%;\n    transition: width 0.5s ease-in-out;\n  }\n  .legend {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n    margin-top: 12px;\n    color: var(--primary-text-color);\n  }\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  .legend-color {\n    width: 12px;\n    height: 12px;\n    border-radius: 3px;\n  }\n`;\n\nexport default styles;\n"],"names":["BarProportionCardEditor","_HTMLElement","_this","_classCallCheck","_callSuper","attachShadow","mode","_initialized","_inherits","key","get","set","hass","this","_hass","_config","_initialize","value","config","_createForm","_this$_config","title","_this$_config2","entities","_this$_config3","display_mode","_this$_config4","decimals","_this$_config5","unit","_this2","content","document","createElement","className","innerHTML","concat","styles","_title","_valueChanged","_display_mode","_displayModeChanged","_decimals","_unit","_entities","map","entity","index","_createEntityRow","join","_addEntity","shadowRoot","firstChild","removeChild","appendChild","forEach","_","entityPicker","querySelector","_this3","ev","_entityChanged","name","_nameChanged","color","_colorChanged","_removeEntity","_toConsumableArray","_objectSpread","detail","_updateConfig","target","push","splice","type","Number","_defineProperty","id","updates","newConfig","event","CustomEvent","bubbles","composed","dispatchEvent","_wrapNativeSuper","HTMLElement","customElements","define","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","BarProportionCard","console","log","Array","isArray","Error","updateCard","values","state","states","attributes","friendly_name","parseFloat","warn","processEntityData","total","reduce","sum","item","toFixed","formatDisplay","editor"],"sourceRoot":""}