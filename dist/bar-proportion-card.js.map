{"version":3,"file":"bar-proportion-card.js","mappings":"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","sources":["webpack://bar-proportion-card/./src/bar-proportion-editor.js","webpack://bar-proportion-card/webpack/bootstrap","webpack://bar-proportion-card/./src/bar-proportion-card.js","webpack://bar-proportion-card/./src/bar-proportion-utils.js","webpack://bar-proportion-card/./src/bar-proportion-styles.js"],"sourcesContent":["class BarProportionCardEditor extends HTMLElement {\n  static get styles() {\n    return `\n      .card-config {\n        padding: 16px;\n      }\n      .row {\n        display: flex;\n        flex-direction: column;\n        margin-top: 8px;\n      }\n      .entities {\n        margin-top: 8px;\n      }\n      .entity-row {\n        display: flex;\n        gap: 8px;\n        margin-top: 8px;\n        align-items: center;\n      }\n    `;\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._initialized = false;\n  }\n\n  firstUpdated() {\n    this._initialized = true;\n    this._createForm();\n  }\n\n  set hass(hass) {\n    this._hass = hass;\n    if (!this._initialized) {\n      this.firstUpdated();\n    }\n  }\n\n  setConfig(config) {\n    this._config = config;\n    if (!this._initialized) {\n      this.firstUpdated();\n    }\n  }\n\n  _createForm() {\n    if (!this._hass || !this._config) return;\n\n    const wrapper = document.createElement('div');\n    wrapper.className = 'card-config';\n\n    const style = document.createElement('style');\n    style.textContent = BarProportionCardEditor.styles;\n    wrapper.appendChild(style);\n\n    // Titre\n    const titleRow = this._createRow();\n    const titleField = document.createElement('ha-textfield');\n    titleField.label = \"Titre\";\n    titleField.value = this._config.title || '';\n    titleField.addEventListener('change', (ev) => this._valueChanged('title', ev.target.value));\n    titleRow.appendChild(titleField);\n    wrapper.appendChild(titleRow);\n\n    // Mode d'affichage\n    const displayRow = this._createRow();\n    const displaySelect = document.createElement('ha-select');\n    displaySelect.label = \"Mode d'affichage\";\n    displaySelect.value = this._config.display_mode || 'percentage';\n    const options = [\n      ['percentage', 'Pourcentage'],\n      ['value', 'Valeur']\n    ];\n    options.forEach(([value, label]) => {\n      const item = document.createElement('mwc-list-item');\n      item.value = value;\n      item.innerText = label;\n      displaySelect.appendChild(item);\n    });\n    displaySelect.addEventListener('selected', (ev) => this._valueChanged('display_mode', ev.target.value));\n    displayRow.appendChild(displaySelect);\n    wrapper.appendChild(displayRow);\n\n    // Décimales\n    const decimalsRow = this._createRow();\n    const decimalsField = document.createElement('ha-textfield');\n    decimalsField.label = \"Décimales\";\n    decimalsField.type = \"number\";\n    decimalsField.min = \"0\";\n    decimalsField.max = \"5\";\n    decimalsField.value = this._config.decimals || 0;\n    decimalsField.addEventListener('change', (ev) => this._valueChanged('decimals', parseInt(ev.target.value)));\n    decimalsRow.appendChild(decimalsField);\n    wrapper.appendChild(decimalsRow);\n\n    // Unité\n    const unitRow = this._createRow();\n    const unitField = document.createElement('ha-textfield');\n    unitField.label = \"Unité\";\n    unitField.value = this._config.unit || '';\n    unitField.addEventListener('change', (ev) => this._valueChanged('unit', ev.target.value));\n    unitRow.appendChild(unitField);\n    wrapper.appendChild(unitRow);\n\n    // Entités\n    const entitiesContainer = document.createElement('div');\n    entitiesContainer.className = 'entities';\n    \n    const addEntityBtn = document.createElement('mwc-button');\n    addEntityBtn.innerHTML = 'Ajouter une entité';\n    addEntityBtn.addEventListener('click', () => this._addEntity());\n\n    this._createEntityRows(entitiesContainer);\n    \n    wrapper.appendChild(entitiesContainer);\n    wrapper.appendChild(addEntityBtn);\n\n    // Remplacer tout le contenu\n    while (this.shadowRoot.firstChild) {\n      this.shadowRoot.removeChild(this.shadowRoot.firstChild);\n    }\n    this.shadowRoot.appendChild(wrapper);\n  }\n\n  _createRow() {\n    const row = document.createElement('div');\n    row.className = 'row';\n    return row;\n  }\n\n  _createEntityRows(container) {\n    container.innerHTML = '';\n    (this._config.entities || []).forEach((entity, index) => {\n      const row = document.createElement('div');\n      row.className = 'entity-row';\n\n      // Entity Picker\n      const entityPicker = document.createElement('ha-entity-picker');\n      entityPicker.hass = this._hass;\n      entityPicker.value = entity.entity;\n      entityPicker.allowCustomEntity = true;\n      entityPicker.index = index;\n      entityPicker.addEventListener('value-changed', (ev) => {\n        this._entityChanged(index, ev.detail.value);\n      });\n\n      // Name Field\n      const nameField = document.createElement('ha-textfield');\n      nameField.label = \"Nom\";\n      nameField.value = entity.name || '';\n      nameField.addEventListener('change', (ev) => {\n        this._nameChanged(index, ev.target.value);\n      });\n\n      // Color Field\n      const colorField = document.createElement('ha-textfield');\n      colorField.label = \"Couleur\";\n      colorField.value = entity.color || '';\n      colorField.addEventListener('change', (ev) => {\n        this._colorChanged(index, ev.target.value);\n      });\n\n      // Delete Button\n      const deleteBtn = document.createElement('ha-icon-button');\n      deleteBtn.innerHTML = '<ha-icon icon=\"mdi:delete\"></ha-icon>';\n      deleteBtn.addEventListener('click', () => {\n        this._removeEntity(index);\n      });\n\n      row.appendChild(entityPicker);\n      row.appendChild(nameField);\n      row.appendChild(colorField);\n      row.appendChild(deleteBtn);\n      container.appendChild(row);\n    });\n  }\n\n  _valueChanged(field, value) {\n    if (!this._config) return;\n    this._config = {\n      ...this._config,\n      [field]: value\n    };\n    this._fireChanged();\n  }\n\n  _entityChanged(index, value) {\n    const entities = [...(this._config.entities || [])];\n    entities[index] = { ...entities[index], entity: value };\n    this._valueChanged('entities', entities);\n  }\n\n  _nameChanged(index, value) {\n    const entities = [...(this._config.entities || [])];\n    entities[index] = { ...entities[index], name: value };\n    this._valueChanged('entities', entities);\n  }\n\n  _colorChanged(index, value) {\n    const entities = [...(this._config.entities || [])];\n    entities[index] = { ...entities[index], color: value };\n    this._valueChanged('entities', entities);\n  }\n\n  _addEntity() {\n    const entities = [...(this._config.entities || [])];\n    entities.push({ entity: '', name: '', color: '' });\n    this._valueChanged('entities', entities);\n    this._createEntityRows(this.shadowRoot.querySelector('.entities'));\n  }\n\n  _removeEntity(index) {\n    const entities = [...(this._config.entities || [])];\n    entities.splice(index, 1);\n    this._valueChanged('entities', entities);\n    this._createEntityRows(this.shadowRoot.querySelector('.entities'));\n  }\n\n  _fireChanged() {\n    const event = new CustomEvent('config-changed', {\n      detail: { config: this._config },\n      bubbles: true,\n      composed: true\n    });\n    this.dispatchEvent(event);\n  }\n}\n\ncustomElements.define('bar-proportion-card-editor', BarProportionCardEditor);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import styles from './bar-proportion-styles.js';\nimport { formatDisplay, processEntityData } from './bar-proportion-utils.js';\nimport './bar-proportion-editor.js';\n\nclass BarProportionCard extends HTMLElement {\n\n  constructor() {\n    super();\n    console.log('[BarProportionCard] Constructor');\n  }\n  \n  static getConfigElement() {\n    console.log('[BarProportionCard] getConfigElement - creating editor');\n    const editor = document.createElement('bar-proportion-card-editor');\n    console.log('[BarProportionCard] getConfigElement - editor created:', editor);\n    return editor;\n  }\n  \n  static getStubConfig() {\n    console.log('[BarProportionCard] getStubConfig called');\n    return {\n      title: \"Ma barre de proportion\",\n      entities: [\n        {\n          entity: \"\",\n          name: \"\",\n          color: \"var(--primary-color)\"\n        }\n      ],\n      display_mode: \"percentage\",\n      decimals: 0,\n      unit: \"\"\n    };\n  }\n\n  setConfig(config) {\n    if (!config.entities || !Array.isArray(config.entities)) {\n      throw new Error('Please define entities');\n    }\n    this.config = {\n      display_mode: 'percentage',\n      unit: '',\n      decimals: 0,\n      ...config\n    };\n  }\n\n  set hass(hass) {\n    this._hass = hass;\n    if (!this.content) {\n      this.content = document.createElement('div');\n      this.appendChild(this.content);\n    }\n    this.updateCard();\n  }\n\n  updateCard() {\n    const values = this.config.entities.map(entity => \n      processEntityData(entity, this._hass)\n    );\n\n    const total = values.reduce((sum, item) => sum + item.value, 0);\n    \n    this.content.innerHTML = `\n      <style>${styles}</style>\n      <ha-card>\n        ${this.config.title ? `<h1 class=\"header\">${this.config.title}</h1>` : ''}\n        \n        <div class=\"bar-container\">\n          ${values.map(item => `\n            <div class=\"bar-section\" \n                 style=\"width: ${(item.value / total * 100)}%; background-color: ${item.color};\">\n            </div>\n          `).join('')}\n        </div>\n\n        <div class=\"legend\">\n          ${values.map(item => `\n            <div class=\"legend-item\">\n              <div class=\"legend-color\" style=\"background-color: ${item.color};\"></div>\n              <span>${item.name} (${formatDisplay(item.value, total, this.config)})</span>\n            </div>\n          `).join('')}\n        </div>\n      </ha-card>\n    `;\n  }\n}\n\ncustomElements.define('bar-proportion-card', BarProportionCard);\n","export function formatDisplay(value, total, config) {\n  if (config.display_mode === 'percentage') {\n    return `${(value / total * 100).toFixed(config.decimals)}%`;\n  } else {\n    return `${value.toFixed(config.decimals)}${config.unit}`;\n  }\n}\n\nexport function processEntityData(entity, hass) {\n  const state = hass.states[entity.entity];\n  if (!state) {\n    console.warn(`Entity ${entity.entity} not found`);\n    return {\n      name: entity.name || entity.entity,\n      value: 0,\n      color: entity.color || 'var(--primary-color)'\n    };\n  }\n  return {\n    name: entity.name || state.attributes.friendly_name || entity.entity,\n    value: parseFloat(state.state) || 0,\n    color: entity.color || 'var(--primary-color)'\n  };\n}\n","const styles = `\n  ha-card {\n    background: var(--ha-card-background, var(--card-background-color));\n    border-radius: var(--ha-card-border-radius, 12px);\n    box-shadow: var(--ha-card-box-shadow, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12));\n    color: var(--primary-text-color);\n    padding: 16px;\n  }\n  .header {\n    color: var(--primary-text-color);\n    font-size: var(--ha-card-header-font-size, 24px);\n    line-height: 1.2;\n    margin-bottom: 16px;\n    font-weight: normal;\n  }\n  .bar-container {\n    width: 100%;\n    height: 24px;\n    display: flex;\n    border-radius: 12px;\n    overflow: hidden;\n    background: var(--secondary-background-color);\n    margin: 8px 0;\n  }\n  .bar-section {\n    height: 100%;\n    transition: width 0.5s ease-in-out;\n  }\n  .legend {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n    margin-top: 12px;\n    color: var(--primary-text-color);\n  }\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  .legend-color {\n    width: 12px;\n    height: 12px;\n    border-radius: 3px;\n  }\n`;\n\nexport default styles;\n"],"names":["BarProportionCardEditor","_HTMLElement","_this","_classCallCheck","_callSuper","attachShadow","mode","_initialized","_inherits","key","get","value","this","_createForm","set","hass","_hass","firstUpdated","config","_config","_this2","wrapper","document","createElement","className","style","textContent","styles","appendChild","titleRow","_createRow","titleField","label","title","addEventListener","ev","_valueChanged","target","displayRow","displaySelect","display_mode","forEach","_ref","_ref2","_slicedToArray","item","innerText","decimalsRow","decimalsField","type","min","max","decimals","parseInt","unitRow","unitField","unit","entitiesContainer","addEntityBtn","innerHTML","_addEntity","_createEntityRows","shadowRoot","firstChild","removeChild","row","container","_this3","entities","entity","index","entityPicker","allowCustomEntity","_entityChanged","detail","nameField","name","_nameChanged","colorField","color","_colorChanged","deleteBtn","_removeEntity","field","_objectSpread","_defineProperty","_fireChanged","_toConsumableArray","push","querySelector","splice","event","CustomEvent","bubbles","composed","dispatchEvent","_wrapNativeSuper","HTMLElement","customElements","define","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","BarProportionCard","console","log","Array","isArray","Error","content","updateCard","values","map","state","states","attributes","friendly_name","parseFloat","warn","concat","processEntityData","total","reduce","sum","join","toFixed","formatDisplay","editor"],"sourceRoot":""}