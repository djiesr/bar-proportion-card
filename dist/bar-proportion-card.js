(()=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}function t(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function e(n,t,e){return(t=o(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,o(r.key),r)}}function o(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}function i(n){var t="function"==typeof Map?new Map:void 0;return i=function(n){if(null===n||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(t){return"function"==typeof n}}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return function(n,t,e){if(c())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(n.bind.apply(n,r));return e&&a(o,e.prototype),o}(n,arguments,u(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a(e,n)},i(n)}function c(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(c=function(){return!!n})()}function a(n,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},a(n,t)}function u(n){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u(n)}var l=function(o){function i(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e,r){return e=u(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}(t,c()?Reflect.construct(e,r||[],u(t).constructor):e.apply(t,r))}(this,i,arguments)}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&a(n,t)}(i,o),l=i,p=[{key:"setConfig",value:function(n){if(!n.entities||!Array.isArray(n.entities))throw new Error("Please define entities");this.config=function(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){e(n,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}({display_mode:"percentage",unit:"",decimals:0},n)}},{key:"hass",set:function(n){this._hass=n,this.content||(this.content=document.createElement("div"),this.appendChild(this.content)),this.updateCard()}},{key:"updateCard",value:function(){var n=this,t=this.config.entities.map((function(t){return function(n,t){var e=t.states[n.entity];return e?{name:n.name||e.attributes.friendly_name||n.entity,value:parseFloat(e.state)||0,color:n.color||"var(--primary-color)"}:(console.warn("Entity ".concat(n.entity," not found")),{name:n.name||n.entity,value:0,color:n.color||"var(--primary-color)"})}(t,n._hass)})),e=t.reduce((function(n,t){return n+t.value}),0);this.content.innerHTML="\n      <style>".concat("\n  ha-card {\n    background: var(--ha-card-background, var(--card-background-color));\n    border-radius: var(--ha-card-border-radius, 12px);\n    box-shadow: var(--ha-card-box-shadow, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12));\n    color: var(--primary-text-color);\n    padding: 16px;\n  }\n  .header {\n    color: var(--primary-text-color);\n    font-size: var(--ha-card-header-font-size, 24px);\n    line-height: 1.2;\n    margin-bottom: 16px;\n    font-weight: normal;\n  }\n  .bar-container {\n    width: 100%;\n    height: 24px;\n    display: flex;\n    border-radius: 12px;\n    overflow: hidden;\n    background: var(--secondary-background-color);\n    margin: 8px 0;\n  }\n  .bar-section {\n    height: 100%;\n    transition: width 0.5s ease-in-out;\n  }\n  .legend {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n    margin-top: 12px;\n    color: var(--primary-text-color);\n  }\n  .legend-item {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  .legend-color {\n    width: 12px;\n    height: 12px;\n    border-radius: 3px;\n  }\n","</style>\n      <ha-card>\n        ").concat(this.config.title?'<h1 class="header">'.concat(this.config.title,"</h1>"):"",'\n        \n        <div class="bar-container">\n          ').concat(t.map((function(n){return'\n            <div class="bar-section" \n                 style="width: '.concat(n.value/e*100,"%; background-color: ").concat(n.color,';">\n            </div>\n          ')})).join(""),'\n        </div>\n\n        <div class="legend">\n          ').concat(t.map((function(t){return'\n            <div class="legend-item">\n              <div class="legend-color" style="background-color: '.concat(t.color,';"></div>\n              <span>').concat(t.name," (").concat(function(n,t,e){return"percentage"===e.display_mode?"".concat((n/t*100).toFixed(e.decimals),"%"):"".concat(n.toFixed(e.decimals)).concat(e.unit)}(t.value,e,n.config),")</span>\n            </div>\n          ")})).join(""),"\n        </div>\n      </ha-card>\n    ")}}],s=[{key:"getConfigElement",value:function(){return document.createElement("bar-proportion-card-editor")}},{key:"getStubConfig",value:function(){return{title:"Ma barre de proportion",entities:[{entity:"",name:"",color:"var(--primary-color)"}],display_mode:"percentage",decimals:0,unit:""}}}],p&&r(l.prototype,p),s&&r(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,p,s}(i(HTMLElement));customElements.define("bar-proportion-card",l)})();
//# sourceMappingURL=bar-proportion-card.js.map